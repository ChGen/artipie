{{#partial "content"}}

<p>
  This is <a href="https://yaml.org/">YAML</a> config
  of your repository
  (read this
  <a href="https://github.com/artipie/artipie/blob/master/README.md">README</a>
  file to get help):
</p>

<form id="config-form">
  <fieldset>
    <textarea id="repo-config" name="config" type="textarea" style="width: 100%; height: 12em;"
>{{#if found}}
{{config}}
{{else}}
repo:
  type: file
  storage: default
  permissions:
    \*:
      - \*
{{/if}}</textarea>
    <input id="config-submit" type="submit" value="Update"/>
  </fieldset>
</form>
<script>
  {{#if found}}
  const exists = true;
  {{else}}
  const exists = false;
  {{/if}}
  const elConfig = document.getElementById('repo-config');
  document.getElementById('config-submit').addEventListener('click', async (evt) => {
    // create or update
    evt.preventDefault();
    const rsp = await fetch(`/api/repos${window.location.pathname}`, {
      body: elConfig.value,
      method: exists ? 'PATCH' : 'PUT'
    });
    console.log(rsp);
    if (rsp.status == 200) {
      location.reload();
    } else {
      alert('Failed to update repository: invalid YAML configuration.')
    }
  });
</script>

<p>
  Try this config for a simple private
  <a href="https://maven.apache.org/">Maven repo</a>
  (full explanation is <a href="https://github.com/artipie/artipie/blob/master/README.md#maven-repo">here</a>):
</p>

<pre>repo:
  type: maven
  storage: default
  permissions:
    yegor256:
      - upload
      - download
    g4s8:
      - download</pre>

<p>With this confirmation,
the GitHub user <a href="https://github.com/yegor256"><code>@yegor256</code></a>
will be able to publish Maven artifacts and
<a href="https://github.com/g4s8"><code>@g4s8</code></a> will
only be able to download them. Nobody else will have any access to the repo.</p>

<p>This is how you may configure it inside your
<a href="https://maven.apache.org/guides/introduction/introduction-to-the-pom.html"><code>pom.xml</code></a>
provided your repository name is <code>{{name}}</code>:</p>

<pre>&lt;project>
  [...]
  &lt;distributionManagement>
    &lt;snapshotRepository>
      &lt;id>artipie&lt;/id>
      &lt;url>https://central.artipie.com/{{name}}&lt;/url>
    &lt;/snapshotRepository>
  &lt;/distributionManagement>
  &lt;repositories>
    &lt;repository>
      &lt;id>artipie&lt;/id>
      &lt;url>https://central.artipie.com/{{name}}&lt;/url>
    &lt;/repository>
  &lt;/repositories>
&lt;/project></pre>

<p>You publish just with
<a href="https://maven.apache.org/plugins/maven-deploy-plugin/usage.html"><code>mvn deploy</code></a>
and you download with
<a href="https://maven.apache.org/plugins/maven-compiler-plugin/index.html"><code>mvn compile</code></a>.

{{/partial}}
{{> base}}
